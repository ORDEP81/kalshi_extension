<!DOCTYPE html>
<html>
<head>
    <title>Simple Extension Test</title>
</head>
<body>
    <h1>Extension Loading Test</h1>
    <div id="results"></div>
    
    <script>
        function testExtensionLoading() {
            const results = document.getElementById('results');
            let output = '<h2>Extension Loading Test Results:</h2>';
            
            // Test 1: Check if extension loaded
            output += '<h3>1. Extension Loading:</h3>';
            if (typeof shouldActivateExtensionEarly === 'function') {
                output += '✅ shouldActivateExtensionEarly function found<br>';
            } else {
                output += '❌ shouldActivateExtensionEarly function NOT found<br>';
            }
            
            if (typeof shouldActivateExtension === 'function') {
                output += '✅ shouldActivateExtension function found<br>';
            } else {
                output += '❌ shouldActivateExtension function NOT found<br>';
            }
            
            if (typeof settings !== 'undefined') {
                output += '✅ settings object found: ' + JSON.stringify(settings) + '<br>';
            } else {
                output += '❌ settings object NOT found<br>';
            }
            
            // Test 2: Check console for errors
            output += '<h3>2. Console Check:</h3>';
            output += 'Check browser console (F12) for any JavaScript errors<br>';
            
            // Test 3: Check if extension is active
            output += '<h3>3. Extension Activation:</h3>';
            if (typeof shouldActivateExtension === 'function') {
                try {
                    const isActive = shouldActivateExtension();
                    output += 'shouldActivateExtension(): ' + isActive + '<br>';
                    output += 'Current URL: ' + window.location.href + '<br>';
                } catch (error) {
                    output += '❌ Error calling shouldActivateExtension(): ' + error.message + '<br>';
                }
            }
            
            // Test 4: Check if processing functions exist
            output += '<h3>4. Processing Functions:</h3>';
            if (typeof processPage === 'function') {
                output += '✅ processPage function found<br>';
            } else {
                output += '❌ processPage function NOT found<br>';
            }
            
            if (typeof processOddsNodes === 'function') {
                output += '✅ processOddsNodes function found<br>';
            } else {
                output += '❌ processOddsNodes function NOT found<br>';
            }
            
            // Test 5: Manual processing test
            output += '<h3>5. Manual Processing Test:</h3>';
            if (typeof processOddsNodes === 'function') {
                try {
                    output += 'Attempting to call processOddsNodes()...<br>';
                    processOddsNodes();
                    output += '✅ processOddsNodes() called successfully<br>';
                } catch (error) {
                    output += '❌ Error calling processOddsNodes(): ' + error.message + '<br>';
                }
            }
            
            results.innerHTML = output;
        }
        
        // Run test after a short delay to ensure extension has loaded
        setTimeout(testExtensionLoading, 1000);
    </script>
</body>
</html>